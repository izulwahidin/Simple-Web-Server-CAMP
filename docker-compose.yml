version: '3.9'

services:
 db:
  image: mariadb
  restart: always
  environment:
   MYSQL_ROOT_PASSWORD: passwordKuat123.

 adminer:
  image: adminer
  restart: always
  ports:
   - 1111:8080
  depends_on:
   - db
 
 php1:
  image: php:7.4-fpm
  restart: always
  volumes:
   - $PWD/php.ini:/usr/local/etc/php/php.ini

 caddy_1:
  image: caddy
  restart: always
  ports:
   - 80:80
   - 443:443
  volumes:
   - $PWD/Caddyfile:/etc/caddy/Caddyfile
   - $PWD/web:/app/public
  depends_on:
   - db
   - php1
   - filemanager
 
 filemanager:
  image: php:7.4-apache
  restart: always
  ports:
   - 2222:80
  volumes:
   - $PWD/tinyfilemanager/:/var/www/html/
   - $PWD/web/:/var/www/html/public/